{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = 'http://127.0.0.1:8082/api';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器\napi.interceptors.request.use(config => {\n  console.log('API Request:', config.method.toUpperCase(), config.url, config.data);\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(response => {\n  console.log('API Response:', response.status, response.data);\n  return response;\n}, error => {\n  var _error$response, _error$response2;\n  console.error('API Error:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status, (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  return Promise.reject(error);\n});\n\n// 消费贷相关API\nexport const consumerCreditAPI = {\n  // 获取授信状态\n  getStatus: chatId => api.get(`/consumer-credit/status?chatId=${chatId}`),\n  // 完成步骤\n  completeStep: (chatId, step) => api.post('/consumer-credit/step', {\n    chatId,\n    step\n  }),\n  // 初始化授信流程\n  startCreditProcess: async chatId => {\n    console.log('startCreditProcess called with chatId:', chatId);\n    console.log('Request URL:', `${API_BASE_URL}/consumer-credit/step`);\n    console.log('Request config:', {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      withCredentials: false,\n      timeout: 30000\n    });\n    try {\n      const response = await api.post('/consumer-credit/step', {\n        chatId,\n        step: 1\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        withCredentials: false,\n        timeout: 30000\n      });\n      console.log('Response received:', response);\n      return response.data;\n    } catch (error) {\n      console.error('Request failed:', error);\n      console.error('Error config:', error.config);\n      console.error('Error response:', error.response);\n      console.error('Error request:', error.request);\n      throw error;\n    }\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","timeout","headers","interceptors","request","use","config","console","log","method","toUpperCase","url","data","error","Promise","reject","response","status","_error$response","_error$response2","consumerCreditAPI","getStatus","chatId","get","completeStep","step","post","startCreditProcess","withCredentials"],"sources":["D:/workspace/rag-elasticsearch/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = 'http://127.0.0.1:8082/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// 请求拦截器\napi.interceptors.request.use(\n  (config) => {\n    console.log('API Request:', config.method.toUpperCase(), config.url, config.data);\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\napi.interceptors.response.use(\n  (response) => {\n    console.log('API Response:', response.status, response.data);\n    return response;\n  },\n  (error) => {\n    console.error('API Error:', error.response?.status, error.response?.data);\n    return Promise.reject(error);\n  }\n);\n\n// 消费贷相关API\nexport const consumerCreditAPI = {\n  // 获取授信状态\n  getStatus: (chatId) => api.get(`/consumer-credit/status?chatId=${chatId}`),\n  \n  // 完成步骤\n  completeStep: (chatId, step) => api.post('/consumer-credit/step', { chatId, step }),\n  \n  // 初始化授信流程\n  startCreditProcess: async (chatId) => {\n    console.log('startCreditProcess called with chatId:', chatId);\n    console.log('Request URL:', `${API_BASE_URL}/consumer-credit/step`);\n    console.log('Request config:', {\n      headers: { 'Content-Type': 'application/json' },\n      withCredentials: false,\n      timeout: 30000\n    });\n    try {\n      const response = await api.post('/consumer-credit/step', { chatId, step: 1 }, {\n        headers: { 'Content-Type': 'application/json' },\n        withCredentials: false,\n        timeout: 30000\n      });\n      console.log('Response received:', response);\n      return response.data;\n    } catch (error) {\n      console.error('Request failed:', error);\n      console.error('Error config:', error.config);\n      console.error('Error response:', error.response);\n      console.error('Error request:', error.request);\n      throw error;\n    }\n  },\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}