{"ast":null,"code":"var _jsxFileName = \"D:\\\\workspace\\\\rag-elasticsearch\\\\frontend\\\\src\\\\components\\\\ChatWindow.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Card, Input, Button, List, Spin } from 'antd';\nimport CreditStepCard from './CreditStepCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatWindow = ({\n  messages = [],\n  onSend,\n  loading,\n  stepData,\n  onComplete\n}) => {\n  _s();\n  const [input, setInput] = useState('');\n  const listRef = useRef(null);\n  useEffect(() => {\n    if (listRef.current) {\n      listRef.current.scrollTop = listRef.current.scrollHeight;\n    }\n  }, [messages, stepData]);\n  const handleSend = () => {\n    const text = input.trim();\n    if (!text) return;\n    onSend && onSend(text);\n    setInput('');\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: \"chat-window\",\n    style: {\n      maxWidth: 800,\n      margin: '24px auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: listRef,\n      style: {\n        height: 360,\n        overflowY: 'auto',\n        padding: '12px 16px',\n        background: '#fafafa',\n        borderRadius: 8,\n        border: '1px solid #f0f0f0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(List, {\n        dataSource: messages,\n        renderItem: msg => {\n          const isUser = msg.role === 'user';\n          return /*#__PURE__*/_jsxDEV(List.Item, {\n            style: {\n              border: 'none',\n              padding: '8px 0'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: isUser ? 'flex-end' : 'flex-start'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  maxWidth: '75%',\n                  background: isUser ? '#1890ff' : '#fff',\n                  color: isUser ? '#fff' : '#333',\n                  border: isUser ? 'none' : '1px solid #f0f0f0',\n                  borderRadius: 8,\n                  padding: '10px 12px',\n                  boxShadow: isUser ? 'none' : '0 1px 3px rgba(0,0,0,0.04)'\n                },\n                children: msg.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 15\n          }, this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), stepData && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'flex-start',\n          padding: '8px 0'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxWidth: '75%'\n          },\n          children: /*#__PURE__*/_jsxDEV(CreditStepCard, {\n            stepData: stepData,\n            onComplete: onComplete,\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'flex-start',\n          padding: '8px 0'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxWidth: '75%',\n            background: '#fff',\n            color: '#333',\n            border: '1px solid #f0f0f0',\n            borderRadius: 8,\n            padding: '10px 12px',\n            boxShadow: '0 1px 3px rgba(0,0,0,0.04)',\n            display: 'inline-flex',\n            alignItems: 'center',\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(Spin, {\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u52A9\\u624B\\u6B63\\u5728\\u5904\\u7406\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 12,\n        marginTop: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(Input.TextArea, {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u4E0E\\u52A9\\u624B\\u7684\\u5BF9\\u8BDD\\u5185\\u5BB9...\",\n        autoSize: {\n          minRows: 2,\n          maxRows: 4\n        },\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          onClick: handleSend,\n          disabled: loading,\n          children: \"\\u53D1\\u9001\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"1Qo1ccgsKu5JRGRlzWuasCqTV24=\");\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Card","Input","Button","List","Spin","CreditStepCard","jsxDEV","_jsxDEV","ChatWindow","messages","onSend","loading","stepData","onComplete","_s","input","setInput","listRef","current","scrollTop","scrollHeight","handleSend","text","trim","className","style","maxWidth","margin","children","ref","height","overflowY","padding","background","borderRadius","border","dataSource","renderItem","msg","isUser","role","Item","display","justifyContent","color","boxShadow","content","fileName","_jsxFileName","lineNumber","columnNumber","alignItems","gap","size","marginTop","TextArea","value","onChange","e","target","placeholder","autoSize","minRows","maxRows","disabled","flexDirection","type","onClick","_c","$RefreshReg$"],"sources":["D:/workspace/rag-elasticsearch/frontend/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Card, Input, Button, List, Spin } from 'antd';\nimport CreditStepCard from './CreditStepCard';\n\nconst ChatWindow = ({ messages = [], onSend, loading, stepData, onComplete }) => {\n  const [input, setInput] = useState('');\n  const listRef = useRef(null);\n\n  useEffect(() => {\n    if (listRef.current) {\n      listRef.current.scrollTop = listRef.current.scrollHeight;\n    }\n  }, [messages, stepData]);\n\n  const handleSend = () => {\n    const text = input.trim();\n    if (!text) return;\n    onSend && onSend(text);\n    setInput('');\n  };\n\n  return (\n    <Card className=\"chat-window\" style={{ maxWidth: 800, margin: '24px auto' }}>\n      <div\n        ref={listRef}\n        style={{\n          height: 360,\n          overflowY: 'auto',\n          padding: '12px 16px',\n          background: '#fafafa',\n          borderRadius: 8,\n          border: '1px solid #f0f0f0'\n        }}\n      >\n        <List\n          dataSource={messages}\n          renderItem={(msg) => {\n            const isUser = msg.role === 'user';\n            return (\n              <List.Item style={{ border: 'none', padding: '8px 0' }}>\n                <div\n                  style={{\n                    display: 'flex',\n                    justifyContent: isUser ? 'flex-end' : 'flex-start'\n                  }}\n                >\n                  <div\n                    style={{\n                      maxWidth: '75%',\n                      background: isUser ? '#1890ff' : '#fff',\n                      color: isUser ? '#fff' : '#333',\n                      border: isUser ? 'none' : '1px solid #f0f0f0',\n                      borderRadius: 8,\n                      padding: '10px 12px',\n                      boxShadow: isUser ? 'none' : '0 1px 3px rgba(0,0,0,0.04)'\n                    }}\n                  >\n                    {msg.content}\n                  </div>\n                </div>\n              </List.Item>\n            );\n          }}\n        />\n\n        {/* 将当前步骤卡片作为助手消息渲染到聊天窗口中 */}\n        {stepData && (\n          <div style={{ display: 'flex', justifyContent: 'flex-start', padding: '8px 0' }}>\n            <div style={{ maxWidth: '75%' }}>\n              <CreditStepCard stepData={stepData} onComplete={onComplete} loading={loading} />\n            </div>\n          </div>\n        )}\n\n        {/* 助手处理中提示 */}\n        {loading && (\n          <div style={{ display: 'flex', justifyContent: 'flex-start', padding: '8px 0' }}>\n            <div\n              style={{\n                maxWidth: '75%',\n                background: '#fff',\n                color: '#333',\n                border: '1px solid #f0f0f0',\n                borderRadius: 8,\n                padding: '10px 12px',\n                boxShadow: '0 1px 3px rgba(0,0,0,0.04)',\n                display: 'inline-flex',\n                alignItems: 'center',\n                gap: 8\n              }}\n            >\n              <Spin size=\"small\" />\n              <span>助手正在处理，请稍候...</span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <div style={{ display: 'flex', gap: 12, marginTop: 12 }}>\n        <Input.TextArea\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder=\"请输入与助手的对话内容...\"\n          autoSize={{ minRows: 2, maxRows: 4 }}\n          disabled={loading}\n        />\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\n          <Button type=\"primary\" onClick={handleSend} disabled={loading}>\n            发送\n          </Button>\n        </div>\n      </div>\n    </Card>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}